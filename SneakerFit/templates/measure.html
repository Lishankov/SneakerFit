<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò–∑–º–µ—Ä–µ–Ω–∏–µ —Å—Ç–æ–ø—ã</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .error-message {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        input:invalid {
            border-color: #d32f2f;
        }
    </style>
</head>
<body>
<div class="topbar">
    <div class="logo">SneakerFit</div>

    <div class="center-menu">
        <a href="/how"><button class="ghost-btn">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</button></a>
        <a href="/fit"><button class="ghost-btn">–ü–æ–¥–±–æ—Ä</button></a>
        <a href="/about"><button class="ghost-btn">–û –Ω–∞—Å</button></a>
    </div>

    <div class="right-menu">
        <a href="/measure"><button class="nav-btn">–ò–∑–º–µ—Ä–∏—Ç—å —Å—Ç–æ–ø—É</button></a>
        <a href="/profile"><button class="nav-btn">–ü—Ä–æ—Ñ–∏–ª—å</button></a>
    </div>
</div>

<div class="main-content">
<div class="container" style="margin-top:140px; animation: fadeIn 0.5s ease;">
    <div class="card">
        <h1>–ú–æ–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è</h1>
        <p style="color: #666; margin-bottom: 20px;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—à–µ–π —Å—Ç–æ–ø—ã –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞ –æ–±—É–≤–∏</p>

        <form method="POST" id="measureForm" onsubmit="return validateForm()">
            <div class="form-group">
                <label for="length">–î–ª–∏–Ω–∞ —Å—Ç–æ–ø—ã (—Å–º) *</label>
                <input type="number" id="length" name="length" step="0.1" min="15" max="40"
                       value="{{ user_measurements.foot_length if user_measurements.foot_length else '' }}"
                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25.5" required>
                <div class="error-message" id="lengthError">–î–ª–∏–Ω–∞ —Å—Ç–æ–ø—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 15 –¥–æ 40 —Å–º</div>
            </div>

            <div class="form-group">
                <label for="width">–®–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ø—ã (—Å–º) *</label>
                <input type="number" id="width" name="width" step="0.1" min="5" max="15"
                       value="{{ user_measurements.foot_width if user_measurements.foot_width else '' }}"
                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 9.5" required>
                <div class="error-message" id="widthError">–®–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ø—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 5 –¥–æ 15 —Å–º</div>
            </div>

            <div class="form-group">
                <label for="arch">–ü–æ–¥—ä—ë–º *</label>
                <select id="arch" name="arch" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–¥—ä–µ–º–∞</option>
                    <option value="–ù–∏–∑–∫–∏–π" {% if user_measurements.arch == '–ù–∏–∑–∫–∏–π' %}selected{% endif %}>–ù–∏–∑–∫–∏–π</option>
                    <option value="–°—Ä–µ–¥–Ω–∏–π" {% if user_measurements.arch == '–°—Ä–µ–¥–Ω–∏–π' %}selected{% endif %}>–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="–í—ã—Å–æ–∫–∏–π" {% if user_measurements.arch == '–í—ã—Å–æ–∫–∏–π' %}selected{% endif %}>–í—ã—Å–æ–∫–∏–π</option>
                </select>
                <div class="error-message" id="archError">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–¥—ä–µ–º–∞</div>
            </div>

            <div class="form-group">
                <label for="dominant">–î–æ–º–∏–Ω–∏—Ä—É—é—â–∞—è –Ω–æ–≥–∞ *</label>
                <select id="dominant" name="dominant" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—â—É—é –Ω–æ–≥—É</option>
                    <option value="–ü—Ä–∞–≤–∞—è" {% if user_measurements.dominant == '–ü—Ä–∞–≤–∞—è' %}selected{% endif %}>–ü—Ä–∞–≤–∞—è</option>
                    <option value="–õ–µ–≤–∞—è" {% if user_measurements.dominant == '–õ–µ–≤–∞—è' %}selected{% endif %}>–õ–µ–≤–∞—è</option>
                </select>
                <div class="error-message" id="dominantError">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—â—É—é –Ω–æ–≥—É</div>
            </div>

            <div class="form-group">
                <label for="foot_type">–¢–∏–ø —Å—Ç–æ–ø—ã *</label>
                <select id="foot_type" name="foot_type" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—Ç–æ–ø—ã</option>
                    <option value="–ù–æ—Ä–º–∞–ª—å–Ω–∞—è" {% if user_measurements.foot_type == '–ù–æ—Ä–º–∞–ª—å–Ω–∞—è' %}selected{% endif %}>–ù–æ—Ä–º–∞–ª—å–Ω–∞—è</option>
                    <option value="–ü–ª–æ—Å–∫–æ—Å—Ç–æ–ø–∏–µ" {% if user_measurements.foot_type == '–ü–ª–æ—Å–∫–æ—Å—Ç–æ–ø–∏–µ' %}selected{% endif %}>–ü–ª–æ—Å–∫–æ—Å—Ç–æ–ø–∏–µ</option>
                    <option value="–°—É–ø–∏–Ω–∞—Ü–∏—è" {% if user_measurements.foot_type == '–°—É–ø–∏–Ω–∞—Ü–∏—è' %}selected{% endif %}>–°—É–ø–∏–Ω–∞—Ü–∏—è</option>
                </select>
                <div class="error-message" id="footTypeError">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—Ç–æ–ø—ã</div>
            </div>

            <div style="display: flex; gap: 12px; margin-top: 20px;">
                <button class="btn btn-primary" type="submit" id="submitBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è</button>
                <a href="/profile" class="btn btn-secondary" style="display:inline-block;">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>

        <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
            <h3 style="margin-bottom: 10px;">üí° –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å?</h3>
            <ul style="color: #666; font-size: 14px; line-height: 1.5;">
                <li>–ò–∑–º–µ—Ä—è–π—Ç–µ —Å—Ç–æ–ø—É –≤–µ—á–µ—Ä–æ–º, –∫–æ–≥–¥–∞ –Ω–æ–≥–∞ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–µ–∫–∞–µ—Ç</li>
                <li>–í—Å—Ç–∞–Ω—å—Ç–µ –Ω–∞ –ª–∏—Å—Ç –±—É–º–∞–≥–∏ –∏ –æ–±–≤–µ–¥–∏—Ç–µ —Å—Ç–æ–ø—É –∫–∞—Ä–∞–Ω–¥–∞—à–æ–º</li>
                <li>–ò–∑–º–µ—Ä—å—Ç–µ –¥–ª–∏–Ω—É –æ—Ç –ø—è—Ç–∫–∏ –¥–æ —Å–∞–º–æ–≥–æ –¥–ª–∏–Ω–Ω–æ–≥–æ –ø–∞–ª—å—Ü–∞</li>
                <li>–ò–∑–º–µ—Ä—å—Ç–µ —à–∏—Ä–∏–Ω—É –≤ —Å–∞–º–æ–º —à–∏—Ä–æ–∫–æ–º –º–µ—Å—Ç–µ</li>
            </ul>
        </div>
    </div>
</div>
</div>

<script>
function validateForm() {
    let isValid = true;

    const lengthInput = document.getElementById('length');
    const lengthError = document.getElementById('lengthError');
    if (!lengthInput.value || lengthInput.value < 15 || lengthInput.value > 40) {
        lengthError.style.display = 'block';
        isValid = false;
    } else {
        lengthError.style.display = 'none';
    }

    const widthInput = document.getElementById('width');
    const widthError = document.getElementById('widthError');
    if (!widthInput.value || widthInput.value < 5 || widthInput.value > 15) {
        widthError.style.display = 'block';
        isValid = false;
    } else {
        widthError.style.display = 'none';
    }

    const archSelect = document.getElementById('arch');
    const archError = document.getElementById('archError');
    if (!archSelect.value) {
        archError.style.display = 'block';
        isValid = false;
    } else {
        archError.style.display = 'none';
    }

    const dominantSelect = document.getElementById('dominant');
    const dominantError = document.getElementById('dominantError');
    if (!dominantSelect.value) {
        dominantError.style.display = 'block';
        isValid = false;
    } else {
        dominantError.style.display = 'none';
    }

    const footTypeSelect = document.getElementById('foot_type');
    const footTypeError = document.getElementById('footTypeError');
    if (!footTypeSelect.value) {
        footTypeError.style.display = 'block';
        isValid = false;
    } else {
        footTypeError.style.display = 'none';
    }

    return isValid;
}

document.addEventListener('DOMContentLoaded', function() {
    const lengthInput = document.getElementById('length');
    const widthInput = document.getElementById('width');

    lengthInput.addEventListener('input', function() {
        if (this.value < 0) this.value = Math.abs(this.value);
        if (this.value < 15 || this.value > 40) {
            this.style.borderColor = '#d32f2f';
        } else {
            this.style.borderColor = '#e8e8e8';
        }
    });

    widthInput.addEventListener('input', function() {
        if (this.value < 0) this.value = Math.abs(this.value);
        if (this.value < 5 || this.value > 15) {
            this.style.borderColor = '#d32f2f';
        } else {
            this.style.borderColor = '#e8e8e8';
        }
    });

    const numberInputs = document.querySelectorAll('input[type="number"]');
    numberInputs.forEach(input => {
        input.addEventListener('keydown', function(e) {
            if (e.key === '-' || e.key === 'e' || e.key === 'E') {
                e.preventDefault();
            }
        });

        input.addEventListener('blur', function() {
            if (this.value < 0) {
                this.value = Math.abs(this.value);
            }
        });
    });
});
</script>

<footer class="global-footer">
    <p>by SneakerFit team ¬© 2025</p>
</footer>
</body>
</html>